<!-- LAYERS TAB -->
<div class="space-y-2 max-h-96 overflow-y-auto pr-1">
  <div *ngFor="let layer of canvasService.layersSignal(); let i = index"
    class="flex items-center justify-between bg-gray-100 rounded px-2 py-2 hover:bg-gray-200 border cursor-pointer relative"
    [class.border-purple-500]="selectedLayer === layer" [attr.data-index]="i" draggable="true"
    (dragstart)="onDragStart($event, i)" (dragover)="onDragOver($event)" (drop)="onDrop($event, i)"
    (dragenter)="onDragEnter(i)" (dragleave)="onDragLeave(i)" [class.drag-over]="dragOverIndex === i"
    (click)="selectLayer(layer)">

    <!-- Drag Handle -->
    <div class="flex items-center justify-center pr-2 cursor-grab">
      <img src="assets/icons/draggable-svgrepo-com.svg" style="transform: rotate(90deg);" class="w-4 h-4 opacity-70" />
    </div>

    <!-- Layer Preview -->
    <div class="flex-1 flex items-center justify-center gap-2">
      <img [src]="layer.preview" class="w-10 h-10 object-cover rounded" />
      <!-- <span class="text-sm truncate max-w-[100px]">{{ layer.name || 'Layer ' + (i + 1) }}</span> -->
    </div>

    <!-- Right Side Icons -->
    <div class="flex items-center gap-1">
      <!-- Visibility Toggle -->
      <button (click)="toggleVisibility(layer, $event)" title="Toggle Visibility"
        class="p-1 hover:bg-white/60 rounded transition">
        <img [src]="!layer.hidden ? 'assets/icons/eye.svg' : 'assets/icons/eye-crossed.svg'" class="w-4 h-4" />
      </button>

      <!-- Lock/Unlock -->
      <button (click)="toggleLock(layer, $event)" title="Toggle Lock" class="p-1 hover:bg-white/60 rounded transition">
        <img [src]="layer.locked ? 'assets/icons/padlock-check.svg' : 'assets/icons/lock-open-alt.svg'"
          class="w-4 h-4" />
      </button>

      <!-- More Context (optional dropdown or actions) -->
      <button title="More Options" class="p-1 hover:bg-white/60 rounded transition">
        <img src="assets/icons/more-horizontal-svgrepo-com.svg" class="w-4 h-4" />
      </button>
    </div>

  </div>
</div>
